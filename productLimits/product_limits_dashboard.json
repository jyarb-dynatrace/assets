{"version":20,"variables":[{"version":2,"key":"LevelThreshold","type":"csv","visible":true,"editable":true,"input":"none,0,20,50,70,90","multiple":false,"defaultValue":"none"}],"tiles":{"1":{"title":"","type":"data","query":"// Fetching business events of type \"dynatrace.limits\" from the Dynatrace environment\nfetch bizevents\n| filter event.type == \"dynatrace.limits\"\n\n// Filtering the results to include only events where the limit field is not null\n| filter isNotNull(limit)\n\n// Removing duplicate entries based on the \"schemaId\" field\n| dedup schemaId, sort: { timestamp desc }\n\n// Selecting specific fields to work with\n| fields timestamp, schemaId, displayName, \n    descriptionOriginal = description, \n    current, limit, level = (current * 1.0/limit) * 100\n\n// Filter level by threshold\n| filterOut if(\n    $LevelThreshold != \"none\",\n    ((toLong(level) < toLong($LevelThreshold)) or isNull(level)),\n    else: false\n)\n\n// Sorting the results by whether \"current\" is not null and by percentage of limit used\n| sort isNotNull(current) desc, level desc\n\n// Adding a new field \"description\" by transforming \"descriptionOriginal\"\n| fieldsAdd description = replacePattern(descriptionOriginal, \"'#'+\", \"######\")\n\n// Adding a new field \"schema\" that creates a clickable Markdown link using the schemaId\n| fieldsAdd schema = concat(\"[\", schemaId, \"](/ui/apps/dynatrace.classic.settings/ui/settings/\", schemaId, \")\")\n\n// Assigning visual indicators to different levels\n// ðŸŸ¢: Usage < 70%\n// ðŸŸ : Usage between 70% and 100%\n// ðŸ”´: Usage >= 100%\n| fieldsAdd status = if (level < 70, \"ðŸŸ¢\")\n| fieldsAdd status = if (level >= 70, \"ðŸŸ \", else: status)\n| fieldsAdd status = if (level >= 100, \"ðŸ”´\", else: status)\n\n// Removing unnecessary fields (timestamp, descriptionOriginal, and schemaId)\n| fieldsRemove timestamp, descriptionOriginal, schemaId\n\n// Specifying the fields to display on the dashboard\n| fields displayName, status, level, current, limit, description, schema","visualization":"table","visualizationSettings":{"table":{"hideColumnsForLargeResults":true,"linewrapEnabled":true,"rowDensity":"default","lineWrapIds":[["displayName"],["description"]],"sortBy":[{"columnId":"[\"level\"]","direction":"descending"}],"columnTypeOverrides":[{"id":132294.1000000015,"fields":["description"],"value":"markdown"},{"id":139362.80000000075,"fields":["schema"],"value":"markdown"}],"columnWidths":{"[\"limit\"]":81,"[\"level\"]":86}},"autoSelectVisualization":true,"unitsOverrides":[{"identifier":"level","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1759152916040},{"identifier":"limit","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1760008475323},{"identifier":"current","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1760008491333}],"thresholds":[{"id":1,"field":"level","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"â‰¥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-apdex-poor-default, #d56b1a)"},"comparator":"â‰¥","label":"","value":70},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"â‰¥","label":"","value":100}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"2":{"title":"","type":"data","query":"// Fetching business events of type \"dynatrace.limits\" from the Dynatrace environment\nfetch bizevents\n| filter event.type == \"dynatrace.limits\"\n\n// Filtering the results to include only events where the limit and current fields are not null\n| filter isNotNull(limit) AND isNotNull(current)\n\n// Removing duplicate entries based on the \"schemaId\" field\n| dedup schemaId, sort: { timestamp desc }\n\n// Selecting specific fields to work with\n| fields displayName, \n    current, limit, \n    level = (current * 1.0/limit) * 100\n\n// Filter level by threshold\n| filterOut if(\n    $LevelThreshold != \"none\",\n    ((toLong(level) < toLong($LevelThreshold)) or isNull(level)),\n    else: false\n)\n\n// Specifying the fields to display on the dashboard\n| fields displayName, level, current\n\n// Sorting the results by percentage of limit used\n| sort level desc","visualization":"honeycomb","visualizationSettings":{"honeycomb":{"max":100,"shape":"square","colorMode":"custom-colors","customColors":[{"id":484559.90000000224,"value":100,"color":{"Default":"var(--dt-colors-charts-categorical-themed-fireplace-color-01-default, #ae132d)"},"comparator":"â‰¥"},{"id":492591.1000000015,"value":70,"color":{"Default":"var(--dt-colors-charts-apdex-poor-default, #d56b1a)"},"comparator":"â‰¥"},{"id":500047.700000003,"value":0,"color":{"Default":"var(--dt-colors-charts-categorical-themed-swamps-color-01-default, #006650)"},"comparator":"â‰¥"}],"displayedFields":["displayName"],"labels":{"showLabels":true}},"unitsOverrides":[{"identifier":"level","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1760008415450}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}}},"layouts":{"1":{"x":0,"y":9,"w":24,"h":20},"2":{"x":0,"y":0,"w":24,"h":9}},"importedWithCode":false,"settings":{}}