{"version":17,"variables":[],"tiles":{"0":{"type":"markdown","title":"","content":"![](https://github.com/aericjw/images-for-dashboards-and-notebooks/blob/main/grail_arch.png?raw=true)"},"1":{"type":"data","title":"Log Source Agnostic","query":"fetch logs\n| filterOut contains(log.source, \"var\")\n| filterOut contains(log.source, \"Users\")\n| filterOut contains(log.source, \"home\")\n| filterOut isNull(log.source)\n| summarize sources = collectDistinct(log.source), count(), by:{log.source}\n| expand sources\n| sort `count()` desc\n| limit 30\n| fields Sources=sources, `Number of Records`=`count()`","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6863)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eca440)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c4233b)"},"comparator":"≥","label":""}]}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"vertical","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["Sources"],"valueAxis":["Number of Records"],"categoryAxisLabel":"Sources","valueAxisLabel":"Number of Records","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"collectDistinct(log.source)","prefixIcon":"","recordField":"collectDistinct(log.source)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{"[\"Sources\"]":422.78125},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["Sources"],"dataMappings":{"value":"Number of Records"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"Number of Records","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["Sources"]},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"3":{"type":"data","title":"Raw Data","query":"fetch logs\n| filter log.source == \"my_app.log\"\n| sort timestamp desc\n| fields content","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["content"],"categoryAxisLabel":"content","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"bin(timestamp, 1h)","xAxisIsLabelVisible":false,"hiddenLegendFields":[],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"bin(timestamp, 1h)","prefixIcon":"","recordField":"bin(timestamp, 1h)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["content"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["content"],"id":1736208003483,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["content"]}},"querySettings":{"maxResultRecords":2000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"timeframe":{"tileTimeframeEnabled":false,"tileTimeframe":{"from":"now()-2h","to":"now()"}}},"4":{"type":"markdown","title":"","content":"➡️"},"5":{"type":"markdown","title":"","content":"➡️"},"6":{"type":"markdown","title":"","content":"➡️"},"7":{"type":"markdown","title":"","content":"➡️"},"8":{"type":"markdown","title":"","content":"➡️"},"9":{"type":"markdown","title":"","content":"➡️"},"10":{"type":"markdown","title":"","content":"➡️"},"11":{"type":"data","title":"Usable Data","query":"fetch logs\n| filter log.source == \"my_app.log\"\n| sort timestamp desc\n| parse content, \"\"\" IPADDR:src_ip '\\t' \n LD:session_id '\\t' \n LD:user_id '\\t' \n DQS:request '\\t' \n JSON:payload '\\t' \n INT:response '\\t' \n JSON:result '\\t' \n DQS:user_agent\"\"\"\n| fields src_ip, session_id, user_id, request, payload, response, user_agent, result\n| fieldsFlatten payload\n| fieldsFlatten result\n| fieldsFlatten result.result\n| fieldsRemove payload, result, result.result","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["src_ip","session_id","user_id","request","user_agent","result.result.outcome","result.result.reason","payload.logout","payload.username","payload.password"],"categoryAxisLabel":"src_ip,session_id,user_id,request,user_agent,result.result.outcome,result.result.reason,payload.logout,payload.username,payload.password","valueAxis":["response"],"valueAxisLabel":"response","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":[],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"bin(timestamp, 1h)","prefixIcon":"","recordField":"bin(timestamp, 1h)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["content"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{"[\"request\"]":462.875},"columnTypeOverrides":[{"fields":["content"],"id":1736208003483,"value":"log-content"}],"colorThresholdTarget":"value","enableThresholdInRow":false},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["session_id","user_id","request","user_agent","result.result.outcome","result.result.reason","payload.logout","payload.username","payload.password","src_ip"],"dataMappings":{"value":"response"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"response","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["session_id","user_id","request","user_agent","result.result.outcome","result.result.reason","payload.logout","payload.username","payload.password","payload.document_name","payload.type","payload.p","src_ip"]}},"querySettings":{"maxResultRecords":2000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"timeframe":{"tileTimeframeEnabled":false,"tileTimeframe":{"from":"now()-2h","to":"now()"}}},"12":{"type":"markdown","title":"","content":"➡️"},"13":{"type":"markdown","title":"","content":"➡️"},"14":{"type":"markdown","title":"","content":"➡️"},"15":{"type":"markdown","title":"","content":"➡️"},"16":{"type":"markdown","title":"","content":"➡️"},"17":{"type":"markdown","title":"","content":"➡️"},"18":{"type":"markdown","title":"","content":"➡️"},"19":{"type":"markdown","title":"","content":"➡️"},"20":{"type":"markdown","title":"","content":"➡️"},"21":{"type":"markdown","title":"","content":"➡️"},"22":{"type":"markdown","title":"","content":"➡️"},"23":{"type":"markdown","title":"","content":"➡️"},"24":{"type":"markdown","title":"","content":"➡️"},"25":{"type":"markdown","title":"","content":"➡️"},"26":{"type":"data","title":"Actionable Data","query":"fetch logs\n| filter log.source == \"my_app.log\"\n| sort timestamp desc\n| parse content, \"\"\" IPADDR:src_ip '\\t' \n LD:session_id '\\t' \n LD:user_id '\\t' \n DQS:request '\\t' \n JSON:payload '\\t' \n INT:response '\\t' \n JSON:result '\\t' \n DQS:user_agent\"\"\"\n| fields src_ip, session_id, user_id, request, payload, response, user_agent, timestamp\n| filter contains(request, \"upload\")\n| makeTimeseries count(), by:{request}","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.anomaly_detection.StaticThresholdAnomalyDetectionAnalyzer","inputData":{"dt.statistics.ui.anomaly_detection.StaticThresholdAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-24h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"alertCondition":"ABOVE","alertOnMissingData":false,"violatingSamples":1,"slidingWindow":5,"dealertingSamples":5,"threshold":10,"query":"fetch logs\n| filter log.source == \"my_app.log\"\n| sort timestamp desc\n| parse content, \"\"\" IPADDR:src_ip '\\t' \n LD:session_id '\\t' \n LD:user_id '\\t' \n DQS:request '\\t' \n JSON:payload '\\t' \n INT:response '\\t' \n JSON:result '\\t' \n DQS:user_agent\"\"\"\n| fields src_ip, session_id, user_id, request, payload, response, user_agent, timestamp\n| filter contains(request, \"upload\")\n| makeTimeseries count(), by:{request}"}}},"davisVisualization":{"isAvailable":true,"settings":{"visibleSections":"VISUALIZATION"}}},"visualization":"davis","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["request"],"categoryAxisLabel":"request","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":[],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["count()"]}},"singleValue":{"showLabel":true,"label":"bin(timestamp, 1h)","prefixIcon":"","recordField":"bin(timestamp, 1h)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["content"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["count()"],"value":"sparkline","id":1736209085652}],"colorThresholdTarget":"value","enableThresholdInRow":false},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["request"],"dataMappings":{"value":"request"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["request"]},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-24h","to":"now()"}}},"27":{"type":"markdown","title":"","content":"➡️"},"28":{"type":"markdown","title":"","content":"➡️"},"29":{"type":"markdown","title":"","content":"➡️"},"30":{"type":"markdown","title":"","content":"➡️"},"31":{"type":"markdown","title":"","content":"➡️"},"32":{"type":"markdown","title":"","content":"➡️"},"33":{"type":"markdown","title":"","content":"➡️"},"34":{"type":"data","title":"Log Anomalies","query":"timeseries sum(log.aws.vpc.flow_logs), by: { vpc_id }\n| limit 20","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer","inputData":{"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-24h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"numberOfSignalFluctuations":1,"alertCondition":"ABOVE","alertOnMissingData":false,"violatingSamples":1,"slidingWindow":5,"dealertingSamples":5,"query":"timeseries sum(log.aws.vpc.flow_logs), by: { vpc_id }\n| limit 20"}},"analyzerHints":{"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"unit":{"unitCategory":"amount","baseUnit":"one"}}}},"davisVisualization":{"isAvailable":true,"settings":{"visibleSections":"VISUALIZATION"}}},"visualization":"davis","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"vpc_id","categoryAxisLabel":"vpc_id","valueAxis":"interval","valueAxisLabel":"interval"},"hiddenLegendFields":[],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["sum(log.aws.vpc.flow_logs)"],"leftAxisDimensions":["vpc_id"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","leftYAxisSettings":{"isLabelVisible":true,"label":"log.aws.vpc.flow_logs"}},"singleValue":{"showLabel":true,"label":"vpc_id","prefixIcon":"","recordField":"vpc_id","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["sum(log.aws.vpc.flow_logs)"],"value":"sparkline","id":1736212694818}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"interval"},"displayedFields":["vpc_id"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["vpc_id"]},"autoSelectVisualization":false},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-24h","to":"now()"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"35":{"type":"markdown","title":"","content":"# Art of the Possible"},"36":{"type":"markdown","title":"","content":"# Parsing In Real Time"}},"layouts":{"0":{"x":0,"y":1,"w":16,"h":14},"1":{"x":16,"y":1,"w":8,"h":6},"3":{"x":0,"y":16,"w":6,"h":7},"4":{"x":6,"y":16,"w":1,"h":1},"5":{"x":6,"y":17,"w":1,"h":1},"6":{"x":6,"y":18,"w":1,"h":1},"7":{"x":6,"y":19,"w":1,"h":1},"8":{"x":6,"y":20,"w":1,"h":1},"9":{"x":6,"y":21,"w":1,"h":1},"10":{"x":6,"y":22,"w":1,"h":1},"11":{"x":8,"y":16,"w":7,"h":7},"12":{"x":7,"y":16,"w":1,"h":1},"13":{"x":7,"y":18,"w":1,"h":1},"14":{"x":7,"y":17,"w":1,"h":1},"15":{"x":7,"y":19,"w":1,"h":1},"16":{"x":7,"y":20,"w":1,"h":1},"17":{"x":7,"y":21,"w":1,"h":1},"18":{"x":7,"y":22,"w":1,"h":1},"19":{"x":15,"y":16,"w":1,"h":1},"20":{"x":15,"y":17,"w":1,"h":1},"21":{"x":15,"y":19,"w":1,"h":1},"22":{"x":15,"y":20,"w":1,"h":1},"23":{"x":15,"y":21,"w":1,"h":1},"24":{"x":15,"y":22,"w":1,"h":1},"25":{"x":15,"y":18,"w":1,"h":1},"26":{"x":17,"y":16,"w":7,"h":7},"27":{"x":16,"y":16,"w":1,"h":1},"28":{"x":16,"y":17,"w":1,"h":1},"29":{"x":16,"y":19,"w":1,"h":1},"30":{"x":16,"y":20,"w":1,"h":1},"31":{"x":16,"y":21,"w":1,"h":1},"32":{"x":16,"y":22,"w":1,"h":1},"33":{"x":16,"y":18,"w":1,"h":1},"34":{"x":16,"y":7,"w":8,"h":8},"35":{"x":0,"y":0,"w":24,"h":1},"36":{"x":0,"y":15,"w":24,"h":1}},"importedWithCode":false,"settings":{"gridLayout":{"mode":"responsive"}}}